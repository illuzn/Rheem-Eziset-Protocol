<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Home Assistant - Unofficial Rheem Eziset Protocol Documentation</title>
  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Home Assistant";
    var mkdocs_page_input_path = "ha.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Unofficial Rheem Eziset Protocol Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../hardware/">Hardware</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../network/">Network</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../logic/">Logic</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../protocol/">Protocol</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Home Assistant</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#working-theory">Working Theory</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#in-home-assistant">In Home Assistant</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#in-home-assistant-lovelace-optional">In Home Assistant Lovelace (Optional)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#node-red-flow">Node-Red Flow</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../contribute/">Contribute</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Unofficial Rheem Eziset Protocol Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Home Assistant</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/illuzn/Rheem-Eziset-Protocol/blob/main/docs/ha.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="home-assistant">Home Assistant</h1>
<p>Currently, I am using the Node-Red addon to make this work with Home Assistant.</p>
<h2 id="working-theory">Working Theory</h2>
<p>The below code creates 3 HA entities:</p>
<ul>
<li><code>input_number.hot_water_temperature</code>: This is used to set the desired hot water temperature. The code also injects the following custom attributes: <code>flow</code> which is the current flow of hot water in L/min and <code>temp</code> which is the currently set hot water temp.</li>
<li><code>switch.hot_water</code>: This is an on/off switch which switches between 37C and 50C. Not strictly necessary but google assistant and siri cannot handle <code>input_number</code> so this is a workaround.</li>
<li><code>switch.automation_hot_water_timeout</code>: This switch enables/ disables the automatic safety timeout. After 5 minutes of inactivity the hot water will revert to 37C. This is designed to avoid the situation where after setting a higher temperature you inadvertently scald yourself in the shower (especially important with young children with sensitive skin or where your hot water heater is capable of achieving more than 50C - strictly this should only be in a corporate environment).</li>
</ul>
<h2 id="in-home-assistant">In Home Assistant</h2>
<p>Create an <code>input_number</code> helper called <code>input_number.hot_water_temperature</code>. It should have the following attributes:</p>
<pre><code>initial: 37
editable: true
min: 37
max: 50
step: 1
mode: slider
unit_of_measurement: °C
icon: mdi:kettle-steam-outline
friendly_name: Hot Water Temperature
</code></pre>
<h2 id="in-home-assistant-lovelace-optional">In Home Assistant Lovelace (Optional)</h2>
<p>I am using the HACS custom card <code>multiple entity row</code> to display the flow and current temperature in lovelace neatly.
<img alt="lovelace screenshot" src="../lovelace.png" /></p>
<pre><code class="language-yaml">type: entities
entities:
  - entity: input_number.hot_water_temperature
  - entity: input_number.hot_water_temperature
    type: custom:multiple-entity-row
    name: Status
    show_state: false
    icon: mdi:water-pump
    entities:
      - attribute: flow
        name: Flow
        unit: L/min
      - attribute: temp
        name: Current Temperature
        unit: °C
</code></pre>
<h2 id="node-red-flow">Node-Red Flow</h2>
<p>Import the following flow into Node Red - do not forget to configure the IP addresses and the HA API integrations as relevant for you.</p>
<p><img alt="flow screenshot" src="../flow.png" /></p>
<p><img alt="subflow screenshot" src="../subflow.png" /></p>
<pre><code class="language-json">[{&quot;id&quot;:&quot;3c93a6b23de0cde5&quot;,&quot;type&quot;:&quot;subflow&quot;,&quot;name&quot;:&quot;Write Attribs&quot;,&quot;info&quot;:&quot;&quot;,&quot;category&quot;:&quot;&quot;,&quot;in&quot;:[{&quot;x&quot;:80,&quot;y&quot;:80,&quot;wires&quot;:[{&quot;id&quot;:&quot;6cf5b5283c883d03&quot;}]}],&quot;out&quot;:[{&quot;x&quot;:1360,&quot;y&quot;:80,&quot;wires&quot;:[{&quot;id&quot;:&quot;cb3efa2e16ec5b57&quot;,&quot;port&quot;:0}]}],&quot;env&quot;:[{&quot;name&quot;:&quot;path&quot;,&quot;type&quot;:&quot;str&quot;,&quot;value&quot;:&quot;&quot;}],&quot;meta&quot;:{},&quot;color&quot;:&quot;#DDAA99&quot;},{&quot;id&quot;:&quot;cb3efa2e16ec5b57&quot;,&quot;type&quot;:&quot;ha-api&quot;,&quot;z&quot;:&quot;3c93a6b23de0cde5&quot;,&quot;name&quot;:&quot;Set State&quot;,&quot;server&quot;:&quot;XXX&quot;,&quot;version&quot;:1,&quot;debugenabled&quot;:false,&quot;protocol&quot;:&quot;http&quot;,&quot;method&quot;:&quot;post&quot;,&quot;path&quot;:&quot;&quot;,&quot;data&quot;:&quot;&quot;,&quot;dataType&quot;:&quot;json&quot;,&quot;responseType&quot;:&quot;json&quot;,&quot;outputProperties&quot;:[{&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;results&quot;}],&quot;x&quot;:1240,&quot;y&quot;:80,&quot;wires&quot;:[[]]},{&quot;id&quot;:&quot;3eea47eb5abc1b38&quot;,&quot;type&quot;:&quot;ha-api&quot;,&quot;z&quot;:&quot;3c93a6b23de0cde5&quot;,&quot;name&quot;:&quot;Get Entity State&quot;,&quot;server&quot;:&quot;XXX&quot;,&quot;version&quot;:1,&quot;debugenabled&quot;:false,&quot;protocol&quot;:&quot;http&quot;,&quot;method&quot;:&quot;get&quot;,&quot;path&quot;:&quot;&quot;,&quot;data&quot;:&quot;&quot;,&quot;dataType&quot;:&quot;json&quot;,&quot;responseType&quot;:&quot;json&quot;,&quot;outputProperties&quot;:[{&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;results&quot;}],&quot;x&quot;:680,&quot;y&quot;:80,&quot;wires&quot;:[[&quot;3e5395467e4b5d0e&quot;]]},{&quot;id&quot;:&quot;6cf5b5283c883d03&quot;,&quot;type&quot;:&quot;function&quot;,&quot;z&quot;:&quot;3c93a6b23de0cde5&quot;,&quot;name&quot;:&quot;Rewrite msg to retrieve entity&quot;,&quot;func&quot;:&quot;msg.payload = { \&quot;path\&quot;: \&quot;/api/states/\&quot; + msg.entity };\nreturn msg;&quot;,&quot;outputs&quot;:1,&quot;noerr&quot;:0,&quot;initialize&quot;:&quot;&quot;,&quot;finalize&quot;:&quot;&quot;,&quot;libs&quot;:[],&quot;x&quot;:260,&quot;y&quot;:80,&quot;wires&quot;:[[&quot;405c70f051b285ee&quot;]]},{&quot;id&quot;:&quot;3e5395467e4b5d0e&quot;,&quot;type&quot;:&quot;function&quot;,&quot;z&quot;:&quot;3c93a6b23de0cde5&quot;,&quot;name&quot;:&quot;Add attributes&quot;,&quot;func&quot;:&quot;for(let item in msg.attributes){\n  msg.payload.attributes[item] = msg.attributes[item]\n}\n\nreturn msg;&quot;,&quot;outputs&quot;:1,&quot;noerr&quot;:0,&quot;initialize&quot;:&quot;&quot;,&quot;finalize&quot;:&quot;&quot;,&quot;libs&quot;:[],&quot;x&quot;:860,&quot;y&quot;:80,&quot;wires&quot;:[[&quot;2dc5570020e5fd44&quot;]]},{&quot;id&quot;:&quot;2dc5570020e5fd44&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;3c93a6b23de0cde5&quot;,&quot;name&quot;:&quot;Rewrite Data/ Path&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload.data&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;payload&quot;,&quot;tot&quot;:&quot;msg&quot;,&quot;dc&quot;:true},{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload.path&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;path&quot;,&quot;tot&quot;:&quot;global&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:1050,&quot;y&quot;:80,&quot;wires&quot;:[[&quot;cb3efa2e16ec5b57&quot;]]},{&quot;id&quot;:&quot;405c70f051b285ee&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;3c93a6b23de0cde5&quot;,&quot;name&quot;:&quot;Rewrite Data/ Path&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;path&quot;,&quot;pt&quot;:&quot;global&quot;,&quot;to&quot;:&quot;payload.path&quot;,&quot;tot&quot;:&quot;msg&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:490,&quot;y&quot;:80,&quot;wires&quot;:[[&quot;3eea47eb5abc1b38&quot;]]},{&quot;id&quot;:&quot;0696dd904aa6c7de&quot;,&quot;type&quot;:&quot;tab&quot;,&quot;label&quot;:&quot;Rheem Hot Water&quot;,&quot;disabled&quot;:false,&quot;info&quot;:&quot;&quot;,&quot;env&quot;:[]},{&quot;id&quot;:&quot;35bc46e08a2a88b3&quot;,&quot;type&quot;:&quot;delay&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Wait 5 Minutes&quot;,&quot;pauseType&quot;:&quot;delay&quot;,&quot;timeout&quot;:&quot;300&quot;,&quot;timeoutUnits&quot;:&quot;seconds&quot;,&quot;rate&quot;:&quot;1&quot;,&quot;nbRateUnits&quot;:&quot;30&quot;,&quot;rateUnits&quot;:&quot;second&quot;,&quot;randomFirst&quot;:&quot;1&quot;,&quot;randomLast&quot;:&quot;5&quot;,&quot;randomUnits&quot;:&quot;seconds&quot;,&quot;drop&quot;:true,&quot;allowrate&quot;:false,&quot;outputs&quot;:1,&quot;x&quot;:1240,&quot;y&quot;:660,&quot;wires&quot;:[[&quot;8078e213ff20ebe9&quot;]]},{&quot;id&quot;:&quot;959ae573c614ed1d&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Reset Loops&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;reset&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;reset&quot;,&quot;tot&quot;:&quot;str&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:1890,&quot;y&quot;:800,&quot;wires&quot;:[[&quot;35bc46e08a2a88b3&quot;]]},{&quot;id&quot;:&quot;5b42f717a84ae8e1&quot;,&quot;type&quot;:&quot;http request&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Get Current Info&quot;,&quot;method&quot;:&quot;GET&quot;,&quot;ret&quot;:&quot;obj&quot;,&quot;paytoqs&quot;:&quot;ignore&quot;,&quot;url&quot;:&quot;http://192.168.XXX.XXX/getInfo.cgi&quot;,&quot;tls&quot;:&quot;&quot;,&quot;persist&quot;:false,&quot;proxy&quot;:&quot;&quot;,&quot;authType&quot;:&quot;&quot;,&quot;senderr&quot;:false,&quot;x&quot;:440,&quot;y&quot;:80,&quot;wires&quot;:[[&quot;4f2aba5954beeeaf&quot;]]},{&quot;id&quot;:&quot;b5f5f860f82d95f1&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Status Update Worker&quot;,&quot;props&quot;:[{&quot;p&quot;:&quot;payload&quot;}],&quot;repeat&quot;:&quot;1&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:true,&quot;onceDelay&quot;:0.1,&quot;topic&quot;:&quot;&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;date&quot;,&quot;x&quot;:210,&quot;y&quot;:80,&quot;wires&quot;:[[&quot;5b42f717a84ae8e1&quot;]]},{&quot;id&quot;:&quot;5ac0a59db72278da&quot;,&quot;type&quot;:&quot;ha-entity&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Hot Water Switch - Google Helper&quot;,&quot;server&quot;:&quot;f1028730287dd073&quot;,&quot;version&quot;:2,&quot;debugenabled&quot;:false,&quot;outputs&quot;:2,&quot;entityType&quot;:&quot;switch&quot;,&quot;config&quot;:[{&quot;property&quot;:&quot;name&quot;,&quot;value&quot;:&quot;Hot Water&quot;},{&quot;property&quot;:&quot;device_class&quot;,&quot;value&quot;:&quot;&quot;},{&quot;property&quot;:&quot;icon&quot;,&quot;value&quot;:&quot;mdi:kettle-steam-outline&quot;},{&quot;property&quot;:&quot;unit_of_measurement&quot;,&quot;value&quot;:&quot;&quot;},{&quot;property&quot;:&quot;state_class&quot;,&quot;value&quot;:&quot;&quot;},{&quot;property&quot;:&quot;last_reset&quot;,&quot;value&quot;:&quot;&quot;}],&quot;state&quot;:&quot;payload&quot;,&quot;stateType&quot;:&quot;msg&quot;,&quot;attributes&quot;:[],&quot;resend&quot;:true,&quot;outputLocation&quot;:&quot;payload&quot;,&quot;outputLocationType&quot;:&quot;none&quot;,&quot;inputOverride&quot;:&quot;allow&quot;,&quot;outputOnStateChange&quot;:true,&quot;outputPayload&quot;:&quot;$entity().state ? \&quot;on\&quot;: \&quot;off\&quot;&quot;,&quot;outputPayloadType&quot;:&quot;jsonata&quot;,&quot;x&quot;:220,&quot;y&quot;:220,&quot;wires&quot;:[[&quot;65619639265cf5ea&quot;],[&quot;741797cf63baafe2&quot;]]},{&quot;id&quot;:&quot;65619639265cf5ea&quot;,&quot;type&quot;:&quot;api-call-service&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Set Water Hot&quot;,&quot;server&quot;:&quot;XXX&quot;,&quot;version&quot;:5,&quot;debugenabled&quot;:false,&quot;domain&quot;:&quot;input_number&quot;,&quot;service&quot;:&quot;set_value&quot;,&quot;areaId&quot;:[],&quot;deviceId&quot;:[],&quot;entityId&quot;:[&quot;input_number.hot_water_temperature&quot;],&quot;data&quot;:&quot;{\&quot;value\&quot;:\&quot;50\&quot;}&quot;,&quot;dataType&quot;:&quot;json&quot;,&quot;mergeContext&quot;:&quot;&quot;,&quot;mustacheAltTags&quot;:false,&quot;outputProperties&quot;:[],&quot;queue&quot;:&quot;none&quot;,&quot;x&quot;:500,&quot;y&quot;:200,&quot;wires&quot;:[[]]},{&quot;id&quot;:&quot;741797cf63baafe2&quot;,&quot;type&quot;:&quot;api-call-service&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Set Water Normal&quot;,&quot;server&quot;:&quot;XXX&quot;,&quot;version&quot;:5,&quot;debugenabled&quot;:false,&quot;domain&quot;:&quot;input_number&quot;,&quot;service&quot;:&quot;set_value&quot;,&quot;areaId&quot;:[],&quot;deviceId&quot;:[],&quot;entityId&quot;:[&quot;input_number.hot_water_temperature&quot;],&quot;data&quot;:&quot;{\&quot;value\&quot;:\&quot;37\&quot;}&quot;,&quot;dataType&quot;:&quot;json&quot;,&quot;mergeContext&quot;:&quot;&quot;,&quot;mustacheAltTags&quot;:false,&quot;outputProperties&quot;:[],&quot;queue&quot;:&quot;none&quot;,&quot;x&quot;:510,&quot;y&quot;:260,&quot;wires&quot;:[[]]},{&quot;id&quot;:&quot;2da68c06fe0159a7&quot;,&quot;type&quot;:&quot;subflow:3c93a6b23de0cde5&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;&quot;,&quot;x&quot;:790,&quot;y&quot;:80,&quot;wires&quot;:[[]]},{&quot;id&quot;:&quot;4f2aba5954beeeaf&quot;,&quot;type&quot;:&quot;function&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Set vars&quot;,&quot;func&quot;:&quot;msg.attributes = {}\nmsg.attributes[\&quot;flow\&quot;] = msg.payload.flow;\nmsg.attributes[\&quot;temp\&quot;] = msg.payload.temp;\nmsg.entity = \&quot;input_number.hot_water_temperature\&quot;;\nreturn msg;&quot;,&quot;outputs&quot;:1,&quot;noerr&quot;:0,&quot;initialize&quot;:&quot;&quot;,&quot;finalize&quot;:&quot;&quot;,&quot;libs&quot;:[],&quot;x&quot;:620,&quot;y&quot;:80,&quot;wires&quot;:[[&quot;2da68c06fe0159a7&quot;]]},{&quot;id&quot;:&quot;02ded775b14645ca&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Check Temp&quot;,&quot;property&quot;:&quot;data.attributes.temp&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;37&quot;,&quot;vt&quot;:&quot;num&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:1310,&quot;y&quot;:240,&quot;wires&quot;:[[&quot;4e7cfaf142737137&quot;],[]]},{&quot;id&quot;:&quot;2aa646efaaf4bad9&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Hot Water Switch Update Worker&quot;,&quot;props&quot;:[{&quot;p&quot;:&quot;payload&quot;}],&quot;repeat&quot;:&quot;5&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:true,&quot;onceDelay&quot;:0.1,&quot;topic&quot;:&quot;&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;date&quot;,&quot;x&quot;:940,&quot;y&quot;:240,&quot;wires&quot;:[[&quot;cc50e38cf7f45292&quot;]]},{&quot;id&quot;:&quot;cc50e38cf7f45292&quot;,&quot;type&quot;:&quot;api-current-state&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Get State&quot;,&quot;server&quot;:&quot;XXX&quot;,&quot;version&quot;:3,&quot;outputs&quot;:1,&quot;halt_if&quot;:&quot;&quot;,&quot;halt_if_type&quot;:&quot;str&quot;,&quot;halt_if_compare&quot;:&quot;is&quot;,&quot;entity_id&quot;:&quot;input_number.hot_water_temperature&quot;,&quot;state_type&quot;:&quot;str&quot;,&quot;blockInputOverrides&quot;:false,&quot;outputProperties&quot;:[{&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;entityState&quot;},{&quot;property&quot;:&quot;data&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;entity&quot;}],&quot;for&quot;:&quot;0&quot;,&quot;forType&quot;:&quot;num&quot;,&quot;forUnits&quot;:&quot;minutes&quot;,&quot;override_topic&quot;:false,&quot;state_location&quot;:&quot;payload&quot;,&quot;override_payload&quot;:&quot;msg&quot;,&quot;entity_location&quot;:&quot;data&quot;,&quot;override_data&quot;:&quot;msg&quot;,&quot;x&quot;:1160,&quot;y&quot;:240,&quot;wires&quot;:[[&quot;02ded775b14645ca&quot;]]},{&quot;id&quot;:&quot;4e7cfaf142737137&quot;,&quot;type&quot;:&quot;api-current-state&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Get Switch State&quot;,&quot;server&quot;:&quot;XXX&quot;,&quot;version&quot;:3,&quot;outputs&quot;:2,&quot;halt_if&quot;:&quot;on&quot;,&quot;halt_if_type&quot;:&quot;str&quot;,&quot;halt_if_compare&quot;:&quot;is&quot;,&quot;entity_id&quot;:&quot;switch.hot_water&quot;,&quot;state_type&quot;:&quot;str&quot;,&quot;blockInputOverrides&quot;:false,&quot;outputProperties&quot;:[{&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;entityState&quot;},{&quot;property&quot;:&quot;data&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;entity&quot;}],&quot;for&quot;:&quot;0&quot;,&quot;forType&quot;:&quot;num&quot;,&quot;forUnits&quot;:&quot;minutes&quot;,&quot;override_topic&quot;:false,&quot;state_location&quot;:&quot;payload&quot;,&quot;override_payload&quot;:&quot;msg&quot;,&quot;entity_location&quot;:&quot;data&quot;,&quot;override_data&quot;:&quot;msg&quot;,&quot;x&quot;:1510,&quot;y&quot;:240,&quot;wires&quot;:[[&quot;8103ab9894b106a7&quot;],[]]},{&quot;id&quot;:&quot;8103ab9894b106a7&quot;,&quot;type&quot;:&quot;api-call-service&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Turn off Switch&quot;,&quot;server&quot;:&quot;XXX&quot;,&quot;version&quot;:5,&quot;debugenabled&quot;:false,&quot;domain&quot;:&quot;switch&quot;,&quot;service&quot;:&quot;turn_off&quot;,&quot;areaId&quot;:[],&quot;deviceId&quot;:[],&quot;entityId&quot;:[&quot;switch.hot_water&quot;],&quot;data&quot;:&quot;&quot;,&quot;dataType&quot;:&quot;jsonata&quot;,&quot;mergeContext&quot;:&quot;&quot;,&quot;mustacheAltTags&quot;:false,&quot;outputProperties&quot;:[],&quot;queue&quot;:&quot;none&quot;,&quot;x&quot;:1720,&quot;y&quot;:240,&quot;wires&quot;:[[]]},{&quot;id&quot;:&quot;b21dcbaa561538c7&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Hot Water - Requested vs Actual Temp Worker&quot;,&quot;props&quot;:[{&quot;p&quot;:&quot;payload&quot;}],&quot;repeat&quot;:&quot;1&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:true,&quot;onceDelay&quot;:0.1,&quot;topic&quot;:&quot;&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;date&quot;,&quot;x&quot;:300,&quot;y&quot;:400,&quot;wires&quot;:[[&quot;f3c8847a352c4ca3&quot;]]},{&quot;id&quot;:&quot;f3c8847a352c4ca3&quot;,&quot;type&quot;:&quot;api-current-state&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Get State&quot;,&quot;server&quot;:&quot;XXX&quot;,&quot;version&quot;:3,&quot;outputs&quot;:1,&quot;halt_if&quot;:&quot;&quot;,&quot;halt_if_type&quot;:&quot;str&quot;,&quot;halt_if_compare&quot;:&quot;is&quot;,&quot;entity_id&quot;:&quot;input_number.hot_water_temperature&quot;,&quot;state_type&quot;:&quot;str&quot;,&quot;blockInputOverrides&quot;:false,&quot;outputProperties&quot;:[{&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;entityState&quot;},{&quot;property&quot;:&quot;data&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;entity&quot;}],&quot;for&quot;:&quot;0&quot;,&quot;forType&quot;:&quot;num&quot;,&quot;forUnits&quot;:&quot;minutes&quot;,&quot;override_topic&quot;:false,&quot;state_location&quot;:&quot;payload&quot;,&quot;override_payload&quot;:&quot;msg&quot;,&quot;entity_location&quot;:&quot;data&quot;,&quot;override_data&quot;:&quot;msg&quot;,&quot;x&quot;:560,&quot;y&quot;:400,&quot;wires&quot;:[[&quot;bac57b6064eedf90&quot;]]},{&quot;id&quot;:&quot;bac57b6064eedf90&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Compare Requested and Actual&quot;,&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;data.attributes.temp&quot;,&quot;vt&quot;:&quot;msg&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:790,&quot;y&quot;:400,&quot;wires&quot;:[[],[&quot;7d997fe20b76bb1f&quot;]]},{&quot;id&quot;:&quot;7d997fe20b76bb1f&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Check if Min Valid&quot;,&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;gte&quot;,&quot;v&quot;:&quot;data.attributes.min&quot;,&quot;vt&quot;:&quot;msg&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:1050,&quot;y&quot;:400,&quot;wires&quot;:[[&quot;034302e27c79d578&quot;],[]]},{&quot;id&quot;:&quot;034302e27c79d578&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Check if Max Valid&quot;,&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;lte&quot;,&quot;v&quot;:&quot;data.attributes.max&quot;,&quot;vt&quot;:&quot;msg&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:1270,&quot;y&quot;:400,&quot;wires&quot;:[[&quot;ab64e497209d9b70&quot;],[]]},{&quot;id&quot;:&quot;ab64e497209d9b70&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Store it in flow.temperature&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;temperature&quot;,&quot;pt&quot;:&quot;flow&quot;,&quot;to&quot;:&quot;payload&quot;,&quot;tot&quot;:&quot;msg&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:1520,&quot;y&quot;:400,&quot;wires&quot;:[[&quot;eced634799386a54&quot;]]},{&quot;id&quot;:&quot;eced634799386a54&quot;,&quot;type&quot;:&quot;http request&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Take Control of Rheem System&quot;,&quot;method&quot;:&quot;GET&quot;,&quot;ret&quot;:&quot;obj&quot;,&quot;paytoqs&quot;:&quot;ignore&quot;,&quot;url&quot;:&quot;http://192.168.XXX.XXX/ctrl.cgi?sid=0&amp;heatingCtrl=1&quot;,&quot;tls&quot;:&quot;&quot;,&quot;persist&quot;:false,&quot;proxy&quot;:&quot;&quot;,&quot;authType&quot;:&quot;&quot;,&quot;senderr&quot;:false,&quot;x&quot;:250,&quot;y&quot;:480,&quot;wires&quot;:[[&quot;9746d74387ecf508&quot;]]},{&quot;id&quot;:&quot;9746d74387ecf508&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Check if Error&quot;,&quot;property&quot;:&quot;payload.sid&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;0&quot;,&quot;vt&quot;:&quot;str&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:500,&quot;y&quot;:480,&quot;wires&quot;:[[],[&quot;b14b73714804ea04&quot;]]},{&quot;id&quot;:&quot;b14b73714804ea04&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Store Session ID in flow.sid&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;sid&quot;,&quot;pt&quot;:&quot;flow&quot;,&quot;to&quot;:&quot;payload.sid&quot;,&quot;tot&quot;:&quot;msg&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:740,&quot;y&quot;:480,&quot;wires&quot;:[[&quot;0693e8ca6891c5db&quot;]]},{&quot;id&quot;:&quot;0693e8ca6891c5db&quot;,&quot;type&quot;:&quot;function&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Setup the url&quot;,&quot;func&quot;:&quot;var t = flow.get(\&quot;temperature\&quot;);\nvar s = flow.get(\&quot;sid\&quot;);\n\nmsg.url = \&quot;http://192.168.XXX.XXX/set.cgi?sid=\&quot; + s + \&quot;&amp;setTemp=\&quot; + t\n\nreturn msg;&quot;,&quot;outputs&quot;:1,&quot;noerr&quot;:0,&quot;initialize&quot;:&quot;&quot;,&quot;finalize&quot;:&quot;&quot;,&quot;libs&quot;:[],&quot;x&quot;:950,&quot;y&quot;:480,&quot;wires&quot;:[[&quot;537a2e81dc41d614&quot;]]},{&quot;id&quot;:&quot;537a2e81dc41d614&quot;,&quot;type&quot;:&quot;http request&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Request New Temp&quot;,&quot;method&quot;:&quot;GET&quot;,&quot;ret&quot;:&quot;obj&quot;,&quot;paytoqs&quot;:&quot;ignore&quot;,&quot;url&quot;:&quot;&quot;,&quot;tls&quot;:&quot;&quot;,&quot;persist&quot;:false,&quot;proxy&quot;:&quot;&quot;,&quot;authType&quot;:&quot;&quot;,&quot;senderr&quot;:false,&quot;x&quot;:1130,&quot;y&quot;:480,&quot;wires&quot;:[[&quot;74d1ee1c63cfa749&quot;]]},{&quot;id&quot;:&quot;74d1ee1c63cfa749&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Check for Error State&quot;,&quot;property&quot;:&quot;payload.reqtemp&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;temperature&quot;,&quot;vt&quot;:&quot;flow&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:1340,&quot;y&quot;:480,&quot;wires&quot;:[[&quot;51a197d8852cecb5&quot;],[&quot;d4d276c7a7a33b42&quot;,&quot;62334558a9bb2eb5&quot;,&quot;51a197d8852cecb5&quot;]]},{&quot;id&quot;:&quot;62334558a9bb2eb5&quot;,&quot;type&quot;:&quot;debug&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Send Debug Message&quot;,&quot;active&quot;:true,&quot;tosidebar&quot;:true,&quot;console&quot;:true,&quot;tostatus&quot;:false,&quot;complete&quot;:&quot;payload&quot;,&quot;targetType&quot;:&quot;msg&quot;,&quot;statusVal&quot;:&quot;&quot;,&quot;statusType&quot;:&quot;auto&quot;,&quot;x&quot;:1610,&quot;y&quot;:540,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;d4d276c7a7a33b42&quot;,&quot;type&quot;:&quot;debug&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Send Debug Message&quot;,&quot;active&quot;:true,&quot;tosidebar&quot;:true,&quot;console&quot;:true,&quot;tostatus&quot;:false,&quot;complete&quot;:&quot;url&quot;,&quot;targetType&quot;:&quot;msg&quot;,&quot;statusVal&quot;:&quot;&quot;,&quot;statusType&quot;:&quot;auto&quot;,&quot;x&quot;:1610,&quot;y&quot;:580,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;51a197d8852cecb5&quot;,&quot;type&quot;:&quot;delay&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Wait 1s&quot;,&quot;pauseType&quot;:&quot;delay&quot;,&quot;timeout&quot;:&quot;1&quot;,&quot;timeoutUnits&quot;:&quot;seconds&quot;,&quot;rate&quot;:&quot;1&quot;,&quot;nbRateUnits&quot;:&quot;1&quot;,&quot;rateUnits&quot;:&quot;second&quot;,&quot;randomFirst&quot;:&quot;1&quot;,&quot;randomLast&quot;:&quot;5&quot;,&quot;randomUnits&quot;:&quot;seconds&quot;,&quot;drop&quot;:false,&quot;allowrate&quot;:false,&quot;outputs&quot;:1,&quot;x&quot;:1560,&quot;y&quot;:480,&quot;wires&quot;:[[&quot;ad81a1605da79aad&quot;]]},{&quot;id&quot;:&quot;ad81a1605da79aad&quot;,&quot;type&quot;:&quot;function&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Setup the url&quot;,&quot;func&quot;:&quot;var s = flow.get(\&quot;sid\&quot;);\n\nmsg.url = \&quot;http://192.168.XXX.XXX/ctrl.cgi?sid=\&quot; + s + \&quot;&amp;heatingCtrl=0\&quot;\n\nreturn msg;&quot;,&quot;outputs&quot;:1,&quot;noerr&quot;:0,&quot;initialize&quot;:&quot;&quot;,&quot;finalize&quot;:&quot;&quot;,&quot;libs&quot;:[],&quot;x&quot;:1730,&quot;y&quot;:480,&quot;wires&quot;:[[&quot;a76078cb19481e28&quot;]]},{&quot;id&quot;:&quot;a76078cb19481e28&quot;,&quot;type&quot;:&quot;http request&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Relinquish Control&quot;,&quot;method&quot;:&quot;GET&quot;,&quot;ret&quot;:&quot;obj&quot;,&quot;paytoqs&quot;:&quot;ignore&quot;,&quot;url&quot;:&quot;&quot;,&quot;tls&quot;:&quot;&quot;,&quot;persist&quot;:false,&quot;proxy&quot;:&quot;&quot;,&quot;authType&quot;:&quot;&quot;,&quot;senderr&quot;:false,&quot;x&quot;:1910,&quot;y&quot;:480,&quot;wires&quot;:[[&quot;9c423f42122a3e93&quot;]]},{&quot;id&quot;:&quot;9c423f42122a3e93&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Check for Error State&quot;,&quot;property&quot;:&quot;payload.sTimeout&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;0&quot;,&quot;vt&quot;:&quot;str&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:2120,&quot;y&quot;:480,&quot;wires&quot;:[[],[&quot;5d703d0aac38620e&quot;,&quot;5d333b0168fd49af&quot;]]},{&quot;id&quot;:&quot;5d703d0aac38620e&quot;,&quot;type&quot;:&quot;debug&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Send Debug Message&quot;,&quot;active&quot;:true,&quot;tosidebar&quot;:true,&quot;console&quot;:true,&quot;tostatus&quot;:false,&quot;complete&quot;:&quot;payload&quot;,&quot;targetType&quot;:&quot;msg&quot;,&quot;statusVal&quot;:&quot;&quot;,&quot;statusType&quot;:&quot;auto&quot;,&quot;x&quot;:2390,&quot;y&quot;:500,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;5d333b0168fd49af&quot;,&quot;type&quot;:&quot;debug&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Send Debug Message&quot;,&quot;active&quot;:true,&quot;tosidebar&quot;:true,&quot;console&quot;:true,&quot;tostatus&quot;:false,&quot;complete&quot;:&quot;url&quot;,&quot;targetType&quot;:&quot;msg&quot;,&quot;statusVal&quot;:&quot;&quot;,&quot;statusType&quot;:&quot;auto&quot;,&quot;x&quot;:2390,&quot;y&quot;:540,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;020edd2b2bd16f44&quot;,&quot;type&quot;:&quot;server-state-changed&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Automation - Hot Water Timeout&quot;,&quot;server&quot;:&quot;f1028730287dd073&quot;,&quot;version&quot;:4,&quot;exposeToHomeAssistant&quot;:true,&quot;haConfig&quot;:[{&quot;property&quot;:&quot;name&quot;,&quot;value&quot;:&quot;Automation - Hot Water Timeout&quot;},{&quot;property&quot;:&quot;icon&quot;,&quot;value&quot;:&quot;mdi:kettle-steam-outline&quot;}],&quot;entityidfilter&quot;:&quot;input_number.hot_water_temperature&quot;,&quot;entityidfiltertype&quot;:&quot;exact&quot;,&quot;outputinitially&quot;:false,&quot;state_type&quot;:&quot;str&quot;,&quot;haltifstate&quot;:&quot;&quot;,&quot;halt_if_type&quot;:&quot;str&quot;,&quot;halt_if_compare&quot;:&quot;is&quot;,&quot;outputs&quot;:1,&quot;output_only_on_state_change&quot;:true,&quot;for&quot;:&quot;0&quot;,&quot;forType&quot;:&quot;num&quot;,&quot;forUnits&quot;:&quot;minutes&quot;,&quot;ignorePrevStateNull&quot;:false,&quot;ignorePrevStateUnknown&quot;:false,&quot;ignorePrevStateUnavailable&quot;:false,&quot;ignoreCurrentStateUnknown&quot;:false,&quot;ignoreCurrentStateUnavailable&quot;:false,&quot;outputProperties&quot;:[{&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;entityState&quot;},{&quot;property&quot;:&quot;data&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;eventData&quot;},{&quot;property&quot;:&quot;topic&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;triggerId&quot;}],&quot;x&quot;:230,&quot;y&quot;:620,&quot;wires&quot;:[[&quot;d179e77ab80c9fe8&quot;,&quot;959ae573c614ed1d&quot;]]},{&quot;id&quot;:&quot;d179e77ab80c9fe8&quot;,&quot;type&quot;:&quot;api-current-state&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Get State&quot;,&quot;server&quot;:&quot;XXX&quot;,&quot;version&quot;:3,&quot;outputs&quot;:1,&quot;halt_if&quot;:&quot;&quot;,&quot;halt_if_type&quot;:&quot;str&quot;,&quot;halt_if_compare&quot;:&quot;is&quot;,&quot;entity_id&quot;:&quot;input_number.hot_water_temperature&quot;,&quot;state_type&quot;:&quot;str&quot;,&quot;blockInputOverrides&quot;:false,&quot;outputProperties&quot;:[{&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;entityState&quot;},{&quot;property&quot;:&quot;data&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;entity&quot;}],&quot;for&quot;:&quot;0&quot;,&quot;forType&quot;:&quot;num&quot;,&quot;forUnits&quot;:&quot;minutes&quot;,&quot;override_topic&quot;:false,&quot;state_location&quot;:&quot;payload&quot;,&quot;override_payload&quot;:&quot;msg&quot;,&quot;entity_location&quot;:&quot;data&quot;,&quot;override_data&quot;:&quot;msg&quot;,&quot;x&quot;:460,&quot;y&quot;:620,&quot;wires&quot;:[[&quot;681e05a0cfa36406&quot;]]},{&quot;id&quot;:&quot;95b372d14c567897&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Compare Requested and Actual&quot;,&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;data.attributes.temp&quot;,&quot;vt&quot;:&quot;msg&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:890,&quot;y&quot;:620,&quot;wires&quot;:[[&quot;35bc46e08a2a88b3&quot;],[&quot;b838db2d3d9b6ded&quot;]]},{&quot;id&quot;:&quot;681e05a0cfa36406&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Check != 37C&quot;,&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;37&quot;,&quot;vt&quot;:&quot;str&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:640,&quot;y&quot;:620,&quot;wires&quot;:[[],[&quot;95b372d14c567897&quot;]]},{&quot;id&quot;:&quot;b838db2d3d9b6ded&quot;,&quot;type&quot;:&quot;delay&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Wait 5 Seconds and Recheck&quot;,&quot;pauseType&quot;:&quot;delay&quot;,&quot;timeout&quot;:&quot;5&quot;,&quot;timeoutUnits&quot;:&quot;seconds&quot;,&quot;rate&quot;:&quot;1&quot;,&quot;nbRateUnits&quot;:&quot;1&quot;,&quot;rateUnits&quot;:&quot;second&quot;,&quot;randomFirst&quot;:&quot;1&quot;,&quot;randomLast&quot;:&quot;5&quot;,&quot;randomUnits&quot;:&quot;seconds&quot;,&quot;drop&quot;:false,&quot;allowrate&quot;:false,&quot;outputs&quot;:1,&quot;x&quot;:700,&quot;y&quot;:740,&quot;wires&quot;:[[&quot;d179e77ab80c9fe8&quot;]]},{&quot;id&quot;:&quot;8078e213ff20ebe9&quot;,&quot;type&quot;:&quot;api-call-service&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Reset to 37C&quot;,&quot;server&quot;:&quot;XXX&quot;,&quot;version&quot;:5,&quot;debugenabled&quot;:false,&quot;domain&quot;:&quot;input_number&quot;,&quot;service&quot;:&quot;set_value&quot;,&quot;areaId&quot;:[],&quot;deviceId&quot;:[],&quot;entityId&quot;:[&quot;input_number.hot_water_temperature&quot;],&quot;data&quot;:&quot;{ \&quot;value\&quot;: \&quot;37\&quot; }&quot;,&quot;dataType&quot;:&quot;json&quot;,&quot;mergeContext&quot;:&quot;&quot;,&quot;mustacheAltTags&quot;:false,&quot;outputProperties&quot;:[],&quot;queue&quot;:&quot;none&quot;,&quot;x&quot;:1690,&quot;y&quot;:660,&quot;wires&quot;:[[&quot;959ae573c614ed1d&quot;]]},{&quot;id&quot;:&quot;3ec6ac59388682b9&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Poll Flow Worker&quot;,&quot;props&quot;:[{&quot;p&quot;:&quot;payload&quot;}],&quot;repeat&quot;:&quot;1&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:true,&quot;onceDelay&quot;:0.1,&quot;topic&quot;:&quot;&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;date&quot;,&quot;x&quot;:370,&quot;y&quot;:840,&quot;wires&quot;:[[&quot;d4554cd9f38e3f30&quot;]]},{&quot;id&quot;:&quot;d4554cd9f38e3f30&quot;,&quot;type&quot;:&quot;api-current-state&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Get State&quot;,&quot;server&quot;:&quot;XXX&quot;,&quot;version&quot;:3,&quot;outputs&quot;:1,&quot;halt_if&quot;:&quot;&quot;,&quot;halt_if_type&quot;:&quot;str&quot;,&quot;halt_if_compare&quot;:&quot;is&quot;,&quot;entity_id&quot;:&quot;input_number.hot_water_temperature&quot;,&quot;state_type&quot;:&quot;str&quot;,&quot;blockInputOverrides&quot;:false,&quot;outputProperties&quot;:[{&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;entityState&quot;},{&quot;property&quot;:&quot;data&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;value&quot;:&quot;&quot;,&quot;valueType&quot;:&quot;entity&quot;}],&quot;for&quot;:&quot;0&quot;,&quot;forType&quot;:&quot;num&quot;,&quot;forUnits&quot;:&quot;minutes&quot;,&quot;override_topic&quot;:false,&quot;state_location&quot;:&quot;payload&quot;,&quot;override_payload&quot;:&quot;msg&quot;,&quot;entity_location&quot;:&quot;data&quot;,&quot;override_data&quot;:&quot;msg&quot;,&quot;x&quot;:560,&quot;y&quot;:840,&quot;wires&quot;:[[&quot;5332bd453508c644&quot;]]},{&quot;id&quot;:&quot;0ea7afe3f483a560&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Check Flow&quot;,&quot;property&quot;:&quot;data.attributes.flow&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;0&quot;,&quot;vt&quot;:&quot;str&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:950,&quot;y&quot;:840,&quot;wires&quot;:[[],[&quot;1a11dee923b44306&quot;]]},{&quot;id&quot;:&quot;1a11dee923b44306&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Reset Loop&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;reset&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;reset&quot;,&quot;tot&quot;:&quot;str&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:1130,&quot;y&quot;:840,&quot;wires&quot;:[[&quot;35bc46e08a2a88b3&quot;,&quot;04a9bf9e4cfa56d0&quot;]]},{&quot;id&quot;:&quot;7e084e804021f322&quot;,&quot;type&quot;:&quot;delay&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Wait 0.1s&quot;,&quot;pauseType&quot;:&quot;delay&quot;,&quot;timeout&quot;:&quot;100&quot;,&quot;timeoutUnits&quot;:&quot;milliseconds&quot;,&quot;rate&quot;:&quot;1&quot;,&quot;nbRateUnits&quot;:&quot;1&quot;,&quot;rateUnits&quot;:&quot;second&quot;,&quot;randomFirst&quot;:&quot;1&quot;,&quot;randomLast&quot;:&quot;5&quot;,&quot;randomUnits&quot;:&quot;seconds&quot;,&quot;drop&quot;:false,&quot;allowrate&quot;:false,&quot;outputs&quot;:1,&quot;x&quot;:1520,&quot;y&quot;:840,&quot;wires&quot;:[[&quot;35bc46e08a2a88b3&quot;]]},{&quot;id&quot;:&quot;5332bd453508c644&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Check Temp&quot;,&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;37&quot;,&quot;vt&quot;:&quot;num&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:770,&quot;y&quot;:840,&quot;wires&quot;:[[&quot;e164b7b994e53747&quot;],[&quot;0ea7afe3f483a560&quot;]]},{&quot;id&quot;:&quot;04a9bf9e4cfa56d0&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Clear Reset&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;delete&quot;,&quot;p&quot;:&quot;reset&quot;,&quot;pt&quot;:&quot;msg&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:1350,&quot;y&quot;:840,&quot;wires&quot;:[[&quot;7e084e804021f322&quot;]]},{&quot;id&quot;:&quot;e164b7b994e53747&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;0696dd904aa6c7de&quot;,&quot;name&quot;:&quot;Reset Loop&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;reset&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;reset&quot;,&quot;tot&quot;:&quot;str&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:950,&quot;y&quot;:760,&quot;wires&quot;:[[&quot;35bc46e08a2a88b3&quot;]]}]
</code></pre>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/illuzn/Rheem-Eziset-Protocol/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../protocol/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../contribute/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
